
# 交叉编译

> 交叉编译：指的是在一个平台上(如`x86`电脑上)编译生成另一个平台(如`ARM`开发板，嵌入式设备或不同操作系统)的可执行代码过程。

在嵌入式开发和跨平台应用构建的过程中，会经常被使用到。


## 1、交叉编译的流程

### 1.1、主要流程

先大致说明交叉编译的流程，后面再对每个点进行展开。

1. 准备交叉编译工具链
2. 配置编译环境
3. 处理依赖库
4. 编译源代码
5. 验证二进制文件
6. 测试运行
7. 调试与优化



### 1.2、交叉编译工具链

#### 1.2.1、交叉编译工具链的组成

交叉编译工具链由以下几部分组成

|组成|说明|
|-|-|
|核心工具|<li>交叉编译器（如`arm-linux-gcc`）：将源代码编译成目标平台的机器码<li>交叉链接器（如`arm-linux-ld`）：负责链接目标文件和库生成可执行文件<li>交叉汇编器/反汇编器（如`as`、`objdump`）：处理汇编代码和二进制文件<li>库管理工具（如`ar`、`nm`）：管理静态库和动态库|
|目标平台库|<li> C 标准库（如 `glibc` 或 `uClibc`）：提供系统调用和基础函数<li>内核头文件（如 `linux-headers`）：定义目标平台的内核接口 <li>其他依赖库（如 `libgcc`、`libstdc++`）：支持语言特性和运行时环境|
|辅助工具|<li>调试工具（如 `gdb`）：用于远程调试目标平台程序 <li>文件格式转换工具（如 `objcopy`、`strip`）：处理可执行文件的优化和格式转换|

#### 1.2.2、交叉编译工具链的安装

1. 下载预交叉编译工具链，例如`arm-linux-gcc-4.3.2.tgz`
2. 解压到指定目录
    ```bash
    tar xzvf arm-linux-gcc-4.3.2.tgz -C /usr/local/arm/
    ```
3. 配置环境变量
    ```bash
    export PATH=/usr/local/arm/4.3.2/bin:$PATH
    ```
4. 验证安装
    ```bash
    arm-linux-gcc -v
    ```
5. 编写一个简易的`helloworld.c`程序，使用工具链编译生成可执行文件
    ```bash
    arm-linux-gcc helloworld.c -o helloworld
    ```


一般在嵌入式系统中，交叉编译工具链都是和硬件平台配套，不需要额外下载，只需要执行安装操作即可。







