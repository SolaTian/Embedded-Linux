# 嵌入式系统常见通信协议

在嵌入式系统中，有一些被广泛应用的通信协议。下面就从OSI


## 并行通信与串行通信

|通信分类|说明|距离|
|-|-|-|
|并行通信|同时使用多条数据线，一次传输多个比特（通常是8位、16位、32位）|<li>数据总线/地址总线（`MCU`内部）: `MCU`访问外部`SRAM`/`Flash` 等等|
|串行通信|使用1~2根数据线，数据一位一位顺序传输|<li> `UART`:串口通信、调试信息打印 <li> `SPI`: 传感器、Flash、显示屏等高速通信 <li> `I²C`: 多设备总线通信，如 `EEPROM`、`RTC`<li> `USB、CAN、Ethernet`: 外设连接、高速通信、网络|


### 为什么需要串行通信

主要有以下几点原因：

1. 嵌入式芯片引脚有限，比如 `MCU` 只有几十根 `IO`，并行通信会占用大量`IO`口（如并行`LCD`通常要20+线），而串行 `SPI/I²C` 只需几根。

2. 并行线切换频繁，电磁干扰大；串行通信信号变化少，更安静、能耗低。


### `UART`

> `UART`是一种异步通信的硬件协议，硬件模块，在网络模型中属于数据链路层。负责将数据封装成帧并通过串口发送。

`UART` 的特点：
1. 使用 `起始位 + 数据位 + 校验位 + 停止位` 的结构
2. 不需要时钟线

### 串口

> 串口是一种串行通信的接口，通常使用 `UART`协议发送和接收数据。

在不同的平台上，设备管理器显示不同：

1. `Windows`: `COM1`、`COM2`...
2. `Linux/MacOS`: `/dev/ttyS0`、`/devttyUSB0`...

串口可以看做是一个 `UART模块+电器接口`

串口可以通过不同的电气标准传输。其中就包括`RS232`与`RS485`

|传输标准|`RS232`|`RS485`|
|-|-|-|
|连接方式|1对1|1对多|
|传输距离|最大 15 米|最大 1200 米|
|抗干扰能力|弱|强|

通过串口通信的双方，需要保持波特率（每秒传输的`bit` 数）的一致，否则数据的接收就会出现乱码。
